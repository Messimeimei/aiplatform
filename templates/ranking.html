{% extends "base.html" %}
{% block title %}排行榜{% endblock %}
{% block container_class %}container py-3{% endblock %}

{% block extra_head %}
<style>
  /* 外层高对比浅底面板 */
  .surface { background:#fff; color:#212529; border-radius:14px; padding:16px; box-shadow:0 8px 24px rgba(0,0,0,.08); }

  /* 标题区：让右侧筛选靠“右下角”对齐 */
  .title-row { display:flex; align-items:flex-end; justify-content:space-between; gap:1rem; }
  .page-title { margin:0; line-height:1.2; }

  /* 小标题左侧竖线样式 */
  .bar-title { position:relative; padding-left:.75rem; font-weight:600; }
  .bar-title::before{
    content:""; position:absolute; left:0; top:0.15em; bottom:0.15em;
    width:3px; border-radius:2px; background:#0d6efd;
  }

  /* 滚动表格容器 */
  .scroll-card { background:#fff; border-radius:12px; border:1px solid #e9ecef; box-shadow:0 4px 14px rgba(0,0,0,.06); }
  .scroll-head { padding:12px 16px; border-bottom:1px solid #e9ecef; display:flex; align-items:center; justify-content:space-between; }
  .scroll-body { max-height:460px; overflow:auto; }
  .table thead th { position: sticky; top: 0; background: #f8f9fa; z-index: 1; }
</style>
{% endblock %}

{% block content %}
<div class="surface">

  <!-- 顶部标题 + 右下角筛选 -->
  <div class="title-row mb-3">
    <h1 class="page-title display-6">关键技术产品排行榜</h1>

    <form class="row g-2 align-items-end" method="get" action="{{ url_for('ranking_page') }}">
      <!-- 所属年份 -->
      <div class="col-auto">
        <label for="yearSel" class="form-label mb-1">所属年份</label>
        <select id="yearSel" name="year" class="form-select" onchange="this.form.submit()">
          {% set year_val = request.args.get('year', '') %}
          {% for y in [2025, 2024, 2023, 2022, 2021] %}
          <option value="{{ y }}" {{ 'selected' if year_val|string==y|string else '' }}>{{ y }}</option>
          {% endfor %}
        </select>
      </div>
      <!-- 所属领域 -->
      <div class="col-auto">
        <label for="fieldSel" class="form-label mb-1">所属领域</label>
        <select id="fieldSel" name="field" class="form-select" onchange="this.form.submit()">
          {% set field_val = request.args.get('field', '') %}
          {% for f in ['全部','大模型','多模态','AIGC','智能体','计算机视觉','NLP','边缘计算'] %}
          <option value="{{ f }}" {{ 'selected' if field_val==f else '' }}>{{ f }}</option>
          {% endfor %}
        </select>
      </div>
    </form>
  </div>

  <!-- 两列滚动表格 -->
  <div class="row g-3">
    <!-- 左：关键技术 -->
    <div class="col-12 col-lg-6">
      <div class="scroll-card h-100">
        <div class="scroll-head">
          <div class="bar-title">关键技术</div>
          <div class="small text-muted">
            数据更新时间：2025-09-28
          </div>
        </div>
        <div class="scroll-body">
          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead>
                <tr class="table-light">
                  <th style="width:64px;">#</th>
                  <th>技术名称</th>
                  <th style="width:120px;">评分</th>
                  <th style="width:120px;">热度</th>
                </tr>
              </thead>
              <tbody>
                {% for i in range(1,21) %}
                <tr>
                  <td>{{ i }}</td>
                  <td>示例技术 {{ i }}</td>
                  <td>92.{{ 20-i }}</td>
                  <td>
                    <span class="badge text-bg-primary">高</span>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- 右：关键产品 -->
    <div class="col-12 col-lg-6">
      <div class="scroll-card h-100">
        <div class="scroll-head">
          <div class="bar-title">关键产品</div>
          <div class="small text-muted">
            数据更新时间：2025-09-28
          </div>
        </div>
        <div class="scroll-body">
          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead>
                <tr class="table-light">
                  <th style="width:64px;">#</th>
                  <th>产品名称</th>
                  <th style="width:120px;">评分</th>
                  <th style="width:120px;">来源</th>
                </tr>
              </thead>
              <tbody>
                {% for i in range(1,21) %}
                <tr>
                  <td>{{ i }}</td>
                  <td>示例产品 {{ i }}</td>
                  <td>90.{{ 20-i }}</td>
                  <td>
                    <span class="badge text-bg-secondary">学术</span>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>r
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
